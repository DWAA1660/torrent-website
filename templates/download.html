<!DOCTYPE html>
<html>
<head>
    <title>Download Progress</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        function checkDownloadProgress() {
            $.ajax({
                url: "/download_progress",
                type: "GET",
                success: function (data) {
                    var progress = parseInt(data);
                    if (progress >= 0 && progress < 100) {
                        $("#progress-bar").css("width", progress + "%");
                        $("#progress-bar").text(progress + "%");
                        setTimeout(checkDownloadProgress, 1000);
                    } else if (progress === 100) {
                        $("#progress-bar").css("width", "100%");
                        $("#progress-bar").text("Finished! check the files <3");
                    }
                },
                error: function () {
                    setTimeout(checkDownloadProgress, 1000);
                }
            });
        }

        $(document).ready(function () {
            setTimeout(checkDownloadProgress, 1000);
        });
    </script>
</head>
<body>
    <h1>Download Progress</h1>
    <div style="width: 500px; background-color: #f5f5f5; border: 1px solid #ccc;">
        <div id="progress-bar" style="width: 0%; background-color: #428bca; color: #fff; text-align: center;"></div>
    </div>
</body>
</html>
